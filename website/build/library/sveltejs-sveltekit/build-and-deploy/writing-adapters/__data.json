{"type":"data","nodes":[{"type":"data","data":[null],"uses":{}},{"type":"data","data":[{"libraryName":1,"itemPath":2,"docItem":3},"sveltejs-sveltekit","build-and-deploy/writing-adapters",{"type":4,"path":5,"relevant":6,"token_counts":7,"usage":11,"markdown":15},"page","25-build-and-deploy/99-writing-adapters.md",true,{"fulltext":8,"digest":9,"short_digest":10},795,390,140,{"input":12,"output":13,"details":14},1843,652,null,{"fulltext":16,"digest":17,"short_digest":18,"essence":19},"---\ntitle: Writing adapters\n---\n\nIf an adapter for your preferred environment doesn't yet exist, you can build your own. We recommend [looking at the source for an adapter](https://github.com/sveltejs/kit/tree/main/packages) to a platform similar to yours and copying it as a starting point.\n\nAdapter packages implement the following API, which creates an `Adapter`:\n\n```js\n// @errors: 2322\n// @filename: ambient.d.ts\ntype AdapterSpecificOptions = any;\n\n// @filename: index.js\n// ---cut---\n/** @param {AdapterSpecificOptions} options */\nexport default function (options) {\n\t/** @type {import('@sveltejs/kit').Adapter} */\n\tconst adapter = {\n\t\tname: 'adapter-package-name',\n\t\tasync adapt(builder) {\n\t\t\t// adapter implementation\n\t\t},\n\t\tasync emulate() {\n\t\t\treturn {\n\t\t\t\tasync platform({ config, prerender }) {\n\t\t\t\t\t// the returned object becomes `event.platform` during dev, build and\n\t\t\t\t\t// preview. Its shape is that of `App.Platform`\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsupports: {\n\t\t\tread: ({ config, route }) => {\n\t\t\t\t// Return `true` if the route with the given `config` can use `read`\n\t\t\t\t// from `$app/server` in production, return `false` if it can't.\n\t\t\t\t// Or throw a descriptive error describing how to configure the deployment\n\t\t\t},\n\t\t\ttracing: () => {\n\t\t\t\t// Return `true` if this adapter supports loading `tracing.server.js`.\n\t\t\t\t// Return `false if it can't, or throw a descriptive error.\n\t\t\t}\n\t\t}\n\t};\n\n\treturn adapter;\n}\n```\n\nOf these, `name` and `adapt` are required. `emulate` and `supports` are optional.\n\nWithin the `adapt` method, there are a number of things that an adapter should do:\n\n- Clear out the build directory\n- Write SvelteKit output with `builder.writeClient`, `builder.writeServer`, and `builder.writePrerendered`\n- Output code that:\n\t- Imports `Server` from `${builder.getServerDirectory()}/index.js`\n\t- Instantiates the app with a manifest generated with `builder.generateManifest({ relativePath })`\n\t- Listens for requests from the platform, converts them to a standard [`Request`](https://developer.mozilla.org/en-US/docs/Web/API/Request) if necessary, calls the `server.respond(request, { getClientAddress })` function to generate a [`Response`](https://developer.mozilla.org/en-US/docs/Web/API/Response) and responds with it\n\t- expose any platform-specific information to SvelteKit via the `platform` option passed to `server.respond`\n\t- Globally shims `fetch` to work on the target platform, if necessary. SvelteKit provides a `@sveltejs/kit/node/polyfills` helper for platforms that can use `undici`\n- Bundle the output to avoid needing to install dependencies on the target platform, if necessary\n- Put the user's static files and the generated JS/CSS in the correct location for the target platform\n\nWhere possible, we recommend putting the adapter output under the `build/` directory with any intermediate output placed under `.svelte-kit/[adapter-name]`.\n","## Adapter API\n\nAdapter packages must export a default function that returns an `Adapter` object with:\n\n**Required properties:**\n- `name`: string identifier for the adapter\n- `adapt(builder)`: async function implementing the adapter\n\n**Optional properties:**\n- `emulate()`: returns platform-specific object that becomes `event.platform` during dev/build/preview\n- `supports`: object with methods to declare feature support:\n  - `read({ config, route })`: returns boolean if route can use `read` from `$app/server` in production\n  - `tracing()`: returns boolean if adapter supports loading `tracing.server.js`\n\n## Adapt Method Requirements\n\nThe `adapt` method must:\n- Clear the build directory\n- Write output using `builder.writeClient()`, `builder.writeServer()`, `builder.writePrerendered()`\n- Generate code that:\n  - Imports `Server` from `${builder.getServerDirectory()}/index.js`\n  - Instantiates app with manifest from `builder.generateManifest({ relativePath })`\n  - Listens for platform requests, converts to standard `Request`, calls `server.respond(request, { getClientAddress })` to get `Response`\n  - Exposes platform info via `platform` option to `server.respond`\n  - Shims `fetch` globally if needed (use `@sveltejs/kit/node/polyfills` for Node-compatible platforms)\n- Bundle output to avoid runtime dependency installation if necessary\n- Place static files and generated JS/CSS in platform-appropriate location\n\nStore adapter output under `build/` with intermediate files under `.svelte-kit/[adapter-name]`.","## Adapter API\n\nExport default function returning `Adapter` with required `name` and `adapt(builder)`, optional `emulate()` and `supports`.\n\n## Adapt Method\n\nMust clear build dir, write output via `builder.writeClient/Server/Prerendered()`, generate code that imports `Server`, instantiates with `builder.generateManifest()`, listens for requests, converts to `Request`, calls `server.respond(request, { getClientAddress })`, exposes platform via `platform` option, shims `fetch` if needed, bundles output, and places files correctly.","Implement the Adapter API by exporting a function that returns an object with name and adapt method, where adapt handles build output, request handling, and platform integration."],"uses":{"params":["name","path"]}}]}
