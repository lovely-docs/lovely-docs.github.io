{"type":"data","nodes":[{"type":"data","data":[null],"uses":{}},{"type":"data","data":[{"libraryName":1,"itemPath":2,"docItem":3},"sveltejs-sveltekit","build-and-deploy",{"type":4,"path":5,"relevant":6,"token_counts":7,"usage":11,"markdown":15},"directory","25-build-and-deploy",true,{"fulltext":8,"digest":9,"short_digest":10},2281,967,435,{"input":12,"output":13,"details":14},3469,1530,null,{"fulltext":16,"digest":17,"short_digest":18,"essence":19},"\n\n## Pages\n\n### building-your-app\nHow to build a SvelteKit app and prevent code from running during the build process.\n\nSvelteKit builds in two stages: Vite optimizes your code, then an adapter tunes it for your target environment. Prevent code execution during build by checking `building` from `$app/environment`. Preview your build with `vite preview`, though it won't perfectly match your deployed app.\n\n### adapters\nAdapters are deployment plugins configured in svelte.config.js that prepare SvelteKit apps for specific platforms.\n\nAdapters transform built SvelteKit apps for deployment. Official adapters exist for Cloudflare, Netlify, Node, static sites, and Vercel. Configure in `svelte.config.js` with `kit.adapter`. Platform-specific context is available via `RequestEvent.platform`.\n\n### zero-config-deployments\nadapter-auto automatically detects and uses the correct deployment adapter for supported hosting platforms, with option to install specific adapters for configuration and performance.\n\n**adapter-auto** automatically selects the correct deployment adapter based on your environment (Cloudflare Pages, Netlify, Vercel, Azure Static Web Apps, AWS SST, or Google Cloud Run).\n\nInstall the specific adapter to devDependencies for environment-specific configuration options and better CI performance. adapter-auto itself takes no options.\n\n### node-servers\nDeploy SvelteKit apps as standalone Node servers using adapter-node with environment variable configuration for proxies, ports, and graceful shutdown.\n\n## Setup\n\nInstall `@sveltejs/adapter-node` and add to `svelte.config.js`. Build with `npm run build`, deploy `build/`, `package.json`, and `node_modules/`. Start with `node build`.\n\n## Environment Variables\n\n- `PORT` (3000), `HOST` (0.0.0.0), `SOCKET_PATH`\n- `ORIGIN` - deployment URL\n- `PROTOCOL_HEADER`, `HOST_HEADER`, `PORT_HEADER` - reverse proxy headers\n- `ADDRESS_HEADER`, `XFF_DEPTH` - client IP detection\n- `BODY_SIZE_LIMIT` (512kb), `SHUTDOWN_TIMEOUT` (30s), `IDLE_TIMEOUT`\n\n## Adapter Options\n\n```js\nadapter({ out: 'build', precompress: true, envPrefix: '' })\n```\n\n## Custom Server\n\nImport `handler.js` for Express/Connect/Polka:\n\n```js\nimport { handler } from './build/handler.js';\nimport express from 'express';\napp.use(handler);\n```\n\n## Graceful Shutdown & systemd\n\nListen to `sveltekit:shutdown` event. Supports systemd socket activation with `LISTEN_PID`/`LISTEN_FDS`.\n\n### static-site-generation\nConfigure SvelteKit to prerender your entire site as static files using adapter-static with options for output directories, SPA fallback, compression, and GitHub Pages deployment.\n\nInstall `@sveltejs/adapter-static` and set `prerender = true` in root layout. Configure adapter options: `pages`, `assets`, `fallback` (for SPA), `precompress`, `strict`. Set `trailingSlash: 'always'` if needed. For GitHub Pages, update `paths.base` to repo name and generate `404.html` fallback.\n\n### single-page-apps\nConfigure SvelteKit as a client-rendered single-page app using adapter-static with a fallback page, with options to prerender individual pages.\n\n## Single-Page App Setup\n\nDisable SSR globally and use `adapter-static` with a fallback page:\n\n```js\n// src/routes/+layout.js\nexport const ssr = false;\n\n// svelte.config.js\nimport adapter from '@sveltejs/adapter-static';\nconst config = {\n\tkit: { adapter: adapter({ fallback: '200.html' }) }\n};\n```\n\nPrerender specific pages by enabling SSR and prerender for those routes:\n\n```js\nexport const prerender = true;\nexport const ssr = true;\n```\n\nFor Apache, add `.htaccess` to route unmatched requests to the fallback page.\n\n**Warning:** SPAs have poor performance, SEO, and accessibility. Prerender as many pages as possible or use static site generation instead.\n\n### cloudflare-deployment\nDeploy SvelteKit apps to Cloudflare Workers or Pages using adapter-cloudflare with configuration options, runtime API access, and local testing setup.\n\n## Installation\n\n```js\nimport adapter from '@sveltejs/adapter-cloudflare';\n\nconst config = {\n\tkit: { adapter: adapter() }\n};\n```\n\n## Key Options\n\n- **fallback**: `'plaintext'` or `'spa'` for 404 handling\n- **routes**: Customize `_routes.json` with `include`/`exclude` (max 100 rules)\n\n## Cloudflare Workers\n\n```jsonc\n{\n\t\"main\": \".svelte-kit/cloudflare/_worker.js\",\n\t\"compatibility_date\": \"2025-01-01\",\n\t\"assets\": {\n\t\t\"binding\": \"ASSETS\",\n\t\t\"directory\": \".svelte-kit/cloudflare\"\n\t}\n}\n```\n\n## Cloudflare Pages\n\nBuild settings: SvelteKit preset, `npm run build`, output `.svelte-kit/cloudflare`. Use server endpoints instead of `/functions` directory.\n\n## Runtime APIs\n\n```js\nexport async function POST({ platform }) {\n\tconst x = platform?.env.YOUR_DURABLE_OBJECT_NAMESPACE.idFromName('x');\n}\n```\n\nInstall `@cloudflare/workers-types` for types.\n\n## Local Testing\n\n`wrangler dev .svelte-kit/cloudflare` (Workers) or `wrangler pages dev .svelte-kit/cloudflare` (Pages)\n\n### cloudflare-workers-deployment\nDeploy SvelteKit to Cloudflare Workers using the deprecated adapter-cloudflare-workers (use adapter-cloudflare instead), configure Wrangler, and access runtime bindings through platform.env.\n\n**Deprecated** in favor of `adapter-cloudflare`. Install `@sveltejs/adapter-cloudflare-workers` and configure Wrangler. Access Cloudflare bindings via `platform.env`. Type with `@cloudflare/workers-types`. Test locally with Wrangler 4+. Reduce worker size by client-side imports; use prerendering instead of `fs`.\n\n### netlify\nDeploy SvelteKit to Netlify using adapter-netlify with options for edge functions and function splitting, with access to Netlify-specific features like context, forms, and custom functions.\n\nInstall `@sveltejs/adapter-netlify` and configure `svelte.config.js` with `edge` and `split` options. Create `netlify.toml` with build command and publish directory. Use `edge: true` for Deno-based edge functions. Access Netlify context via `event.platform?.context`. Use `_redirects` file for redirects (higher priority than `netlify.toml`). For file system access, use `read()` from `$app/server` instead of `fs`.\n\n### vercel-deployment\nConfigure and deploy SvelteKit apps to Vercel with adapter-vercel, supporting serverless/edge functions, ISR, image optimization, and environment variables.\n\n## Setup\n\nInstall `@sveltejs/adapter-vercel` and add to `svelte.config.js`.\n\n## Configuration\n\nSet options via `export const config` in route files:\n- `runtime`: `'edge'` or `'nodejs20.x'`/`'nodejs22.x'`\n- `regions`: array of edge regions\n- `split`: deploy as individual function\n- `memory`: 128-3008 MB\n- `maxDuration`: execution time limit\n- `external`: exclude dependencies from edge bundling\n\n## ISR (Incremental Static Regeneration)\n\n```js\nexport const config = {\n\tisr: {\n\t\texpiration: 60,\n\t\tbypassToken: BYPASS_TOKEN,\n\t\tallowQuery: ['search']\n\t}\n};\n```\n\nBypass cache with `__prerender_bypass=\u003Ctoken>` cookie or `x-prerender-revalidate` header.\n\n## Images\n\nConfigure in adapter options with `sizes`, `formats`, `minimumCacheTTL`, `domains`.\n\n## Environment Variables\n\nAccess via `$env/static/private` (preferred for static replacement).\n\n## Troubleshooting\n\n- Edge functions: can't use `fs`, use `read()` from `$app/server`\n- Serverless: `fs` won't work as expected, use `read()` instead\n- Deployment Protection: enable \"Protection Bypass for Automation\" for edge functions using `read()`\n\n### writing-adapters\nImplement the Adapter API by exporting a function that returns an object with name and adapt method, where adapt handles build output, request handling, and platform integration.\n\n## Adapter API\n\nExport default function returning `Adapter` with required `name` and `adapt(builder)`, optional `emulate()` and `supports`.\n\n## Adapt Method\n\nMust clear build dir, write output via `builder.writeClient/Server/Prerendered()`, generate code that imports `Server`, instantiates with `builder.generateManifest()`, listens for requests, converts to `Request`, calls `server.respond(request, { getClientAddress })`, exposes platform via `platform` option, shims `fetch` if needed, bundles output, and places files correctly.\n\n### build-and-deploy\nIntroduction to building and deploying SvelteKit applications.\n\nOverview of building and deploying SvelteKit applications to production.\n\n","## Building\n\nSvelteKit builds in two stages: Vite optimizes code, then an adapter tunes it for the target environment. Prevent code execution during build by checking `building` from `$app/environment`. Preview builds with `vite preview`.\n\n## Adapters\n\nAdapters are deployment plugins configured in `svelte.config.js` that transform built apps for specific platforms. Official adapters exist for Cloudflare, Netlify, Node, static sites, and Vercel. Access platform-specific context via `RequestEvent.platform`.\n\n## Deployment Options\n\n**adapter-auto** automatically detects and uses the correct adapter (Cloudflare Pages, Netlify, Vercel, Azure Static Web Apps, AWS SST, Google Cloud Run). Install the specific adapter to devDependencies for environment-specific configuration.\n\n**Node servers** (`adapter-node`): Build with `npm run build`, deploy `build/`, `package.json`, `node_modules/`. Start with `node build`. Configure via environment variables: `PORT` (3000), `HOST` (0.0.0.0), `ORIGIN`, reverse proxy headers (`PROTOCOL_HEADER`, `HOST_HEADER`, `PORT_HEADER`), client IP detection (`ADDRESS_HEADER`, `XFF_DEPTH`), `BODY_SIZE_LIMIT` (512kb), `SHUTDOWN_TIMEOUT` (30s). Supports graceful shutdown via `sveltekit:shutdown` event and systemd socket activation.\n\n**Static sites** (`adapter-static`): Set `prerender = true` in root layout. Configure `pages`, `assets`, `fallback` (for SPA), `precompress`, `strict`. For GitHub Pages, set `paths.base` to repo name and generate `404.html` fallback.\n\n**Single-page apps** (`adapter-static`): Disable SSR globally with `export const ssr = false` in root layout, use fallback page. Prerender specific pages by enabling SSR and `export const prerender = true` for those routes. Add `.htaccess` for Apache routing. Warning: SPAs have poor performance, SEO, and accessibility.\n\n**Cloudflare** (`adapter-cloudflare`): Configure fallback (`'plaintext'` or `'spa'`), customize `_routes.json` with `include`/`exclude` (max 100 rules). Access runtime APIs via `platform?.env`. Test locally with `wrangler dev .svelte-kit/cloudflare` (Workers) or `wrangler pages dev .svelte-kit/cloudflare` (Pages).\n\n**Netlify** (`adapter-netlify`): Use `edge: true` for Deno-based edge functions, `split: true` for function splitting. Access Netlify context via `event.platform?.context`. Use `_redirects` file for redirects. Use `read()` from `$app/server` instead of `fs` for file access.\n\n**Vercel** (`adapter-vercel`): Set options via `export const config` in route files: `runtime` (`'edge'` or `'nodejs20.x'`/`'nodejs22.x'`), `regions`, `split`, `memory` (128-3008 MB), `maxDuration`. ISR configuration: `expiration`, `bypassToken`, `allowQuery`. Bypass cache with `__prerender_bypass=\u003Ctoken>` cookie or `x-prerender-revalidate` header. Configure image optimization with `sizes`, `formats`, `minimumCacheTTL`, `domains`. Use `read()` from `$app/server` instead of `fs`.\n\n## Custom Adapters\n\nImplement the Adapter API by exporting a function returning an object with `name` and `adapt(builder)` methods. The `adapt` method must clear the build directory, write output via `builder.writeClient/Server/Prerendered()`, generate code that imports `Server`, instantiate with `builder.generateManifest()`, listen for requests, convert to `Request`, call `server.respond(request, { getClientAddress })`, expose platform via `platform` option, shim `fetch` if needed, bundle output, and place files correctly.","## Building & Adapters\n\nSvelteKit builds in two stages: Vite optimizes code, then an adapter tunes it for the target environment. Prevent build-time execution with `building` from `$app/environment`.\n\nAdapters are deployment plugins configured in `svelte.config.js`. **adapter-auto** automatically detects the correct adapter. Official adapters: Node, static sites, Cloudflare, Netlify, Vercel.\n\n## Key Deployment Patterns\n\n**Node**: `npm run build`, deploy `build/`, `package.json`, `node_modules/`. Start with `node build`. Configure via `PORT`, `HOST`, `ORIGIN`, reverse proxy headers, `BODY_SIZE_LIMIT` (512kb), `SHUTDOWN_TIMEOUT` (30s).\n\n**Static**: Set `prerender = true` in root layout. Configure `pages`, `assets`, `fallback`, `precompress`.\n\n**SPA**: Disable SSR globally with `export const ssr = false`, use fallback page. Prerender specific pages with `export const prerender = true`.\n\n**Cloudflare**: Configure fallback, `_routes.json` rules (max 100). Access runtime APIs via `platform?.env`. Test with `wrangler dev .svelte-kit/cloudflare`.\n\n**Netlify**: Use `edge: true` for edge functions, `split: true` for function splitting. Access context via `event.platform?.context`. Use `read()` from `$app/server` instead of `fs`.\n\n**Vercel**: Set `runtime` (`'edge'` or `'nodejs20.x'`), `regions`, `split`, `memory`, `maxDuration` via `export const config`. ISR: `expiration`, `bypassToken`, `allowQuery`. Bypass cache with `__prerender_bypass=\u003Ctoken>` cookie.","Build and deploy SvelteKit apps using adapters for various platforms (Node, static, Cloudflare, Netlify, Vercel) with platform-specific configuration and runtime APIs."],"uses":{"params":["name","path"]}}]}
