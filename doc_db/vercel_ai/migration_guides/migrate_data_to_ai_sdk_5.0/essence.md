Two-phase data migration from AI SDK 4.x to 5.0: Phase 1 adds runtime conversion layer (v4 database ↔ v5 app) without schema changes; Phase 2 migrates to v5 schema via dual-write, background batch conversion, and read switch to eliminate conversion overhead. Message structure changes: v4 top-level `content`/`reasoning`/`toolInvocations` → v5 `parts` array with text/reasoning/tool-${name} parts; tool state mapping: `partial-call`→`input-streaming`, `call`→`input-available`, `result`→`output-available`.