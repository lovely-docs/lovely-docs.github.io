{"type":"data","nodes":[{"type":"data","data":[null],"uses":{}},{"type":"data","data":[{"libraryName":1,"itemPath":2,"docItem":3},"sveltejs-svelte","Template Syntax/animate",{"type":4,"path":5,"relevant":6,"token_counts":7,"usage":11,"markdown":15},"page","03-template-syntax/16-animate.md",true,{"fulltext":8,"digest":9,"short_digest":10},1241,580,279,{"input":12,"output":13,"details":14},2280,981,null,{"fulltext":16,"digest":17,"short_digest":18,"essence":19},"---\ntitle: animate:\n---\n\nAn animation is triggered when the contents of a [keyed each block](each#Keyed-each-blocks) are re-ordered. Animations do not run when an element is added or removed, only when the index of an existing data item within the each block changes. Animate directives must be on an element that is an _immediate_ child of a keyed each block.\n\nAnimations can be used with Svelte's [built-in animation functions](svelte-animate) or [custom animation functions](#Custom-animation-functions).\n\n```svelte\n\u003C!-- When `list` is reordered the animation will run -->\n{#each list as item, index (item)}\n\t\u003Cli animate:flip>{item}\u003C/li>\n{/each}\n```\n\n## Animation Parameters\n\nAs with actions and transitions, animations can have parameters.\n\n(The double `{{curlies}}` aren't a special syntax; this is an object literal inside an expression tag.)\n\n```svelte\n{#each list as item, index (item)}\n\t\u003Cli animate:flip={{ delay: 500 }}>{item}\u003C/li>\n{/each}\n```\n\n## Custom animation functions\n\n```js\n/// copy: false\n// @noErrors\nanimation = (node: HTMLElement, { from: DOMRect, to: DOMRect } , params: any) => {\n\tdelay?: number,\n\tduration?: number,\n\teasing?: (t: number) => number,\n\tcss?: (t: number, u: number) => string,\n\ttick?: (t: number, u: number) => void\n}\n```\n\nAnimations can use custom functions that provide the `node`, an `animation` object and any `parameters` as arguments. The `animation` parameter is an object containing `from` and `to` properties each containing a [DOMRect](https://developer.mozilla.org/en-US/docs/Web/API/DOMRect#Properties) describing the geometry of the element in its `start` and `end` positions. The `from` property is the DOMRect of the element in its starting position, and the `to` property is the DOMRect of the element in its final position after the list has been reordered and the DOM updated.\n\nIf the returned object has a `css` method, Svelte will create a [web animation](https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API) that plays on the element.\n\nThe `t` argument passed to `css` is a value that goes from `0` and `1` after the `easing` function has been applied. The `u` argument is equal to `1 - t`.\n\nThe function is called repeatedly _before_ the animation begins, with different `t` and `u` arguments.\n\n\u003C!-- TODO: Types -->\n\n```svelte\n\u003C!--- file: App.svelte --->\n\u003Cscript>\n\timport { cubicOut } from 'svelte/easing';\n\n\t/**\n\t * @param {HTMLElement} node\n\t * @param {{ from: DOMRect; to: DOMRect }} states\n\t * @param {any} params\n\t */\n\tfunction whizz(node, { from, to }, params) {\n\t\tconst dx = from.left - to.left;\n\t\tconst dy = from.top - to.top;\n\n\t\tconst d = Math.sqrt(dx * dx + dy * dy);\n\n\t\treturn {\n\t\t\tdelay: 0,\n\t\t\tduration: Math.sqrt(d) * 120,\n\t\t\teasing: cubicOut,\n\t\t\tcss: (t, u) => `transform: translate(${u * dx}px, ${u * dy}px) rotate(${t * 360}deg);`\n\t\t};\n\t}\n\u003C/script>\n\n{#each list as item, index (item)}\n\t\u003Cdiv animate:whizz>{item}\u003C/div>\n{/each}\n```\n\nA custom animation function can also return a `tick` function, which is called _during_ the animation with the same `t` and `u` arguments.\n\n> [!NOTE] If it's possible to use `css` instead of `tick`, do so â€” web animations can run off the main thread, preventing jank on slower devices.\n\n```svelte\n\u003C!--- file: App.svelte --->\n\u003Cscript>\n\timport { cubicOut } from 'svelte/easing';\n\n\t/**\n\t * @param {HTMLElement} node\n\t * @param {{ from: DOMRect; to: DOMRect }} states\n\t * @param {any} params\n\t */\n\tfunction whizz(node, { from, to }, params) {\n\t\tconst dx = from.left - to.left;\n\t\tconst dy = from.top - to.top;\n\n\t\tconst d = Math.sqrt(dx * dx + dy * dy);\n\n\t\treturn {\n\t\t\tdelay: 0,\n\t\t\tduration: Math.sqrt(d) * 120,\n\t\t\teasing: cubicOut,\n\t\t\ttick: (t, u) => Object.assign(node.style, { color: t > 0.5 ? 'Pink' : 'Blue' })\n\t\t};\n\t}\n\u003C/script>\n\n{#each list as item, index (item)}\n\t\u003Cdiv animate:whizz>{item}\u003C/div>\n{/each}\n```\n","## Animations in Keyed Each Blocks\n\nAnimations are triggered when elements in a keyed each block are reordered. They only run when an existing item's index changes, not when items are added or removed. The `animate:` directive must be placed on an immediate child of a keyed each block.\n\n### Built-in and Custom Animations\n\nUse built-in animation functions or create custom ones:\n\n```svelte\n{#each list as item, index (item)}\n\t\u003Cli animate:flip={{ delay: 500 }}>{item}\u003C/li>\n{/each}\n```\n\n### Custom Animation Functions\n\nA custom animation function receives the node, an animation object with `from` and `to` DOMRect properties, and optional parameters. It returns an object with animation configuration:\n\n```js\nanimation = (node, { from, to }, params) => ({\n\tdelay?: number,\n\tduration?: number,\n\teasing?: (t: number) => number,\n\tcss?: (t: number, u: number) => string,\n\ttick?: (t: number, u: number) => void\n})\n```\n\nThe `from` property contains the element's starting DOMRect, and `to` contains its final DOMRect after reordering.\n\n### CSS-based Animations\n\nIf the returned object has a `css` method, Svelte creates a web animation. The `t` argument ranges from 0 to 1 (after easing), and `u` equals `1 - t`. This method is preferred as it runs off the main thread:\n\n```js\nfunction whizz(node, { from, to }, params) {\n\tconst dx = from.left - to.left;\n\tconst dy = from.top - to.top;\n\tconst d = Math.sqrt(dx * dx + dy * dy);\n\t\n\treturn {\n\t\tduration: Math.sqrt(d) * 120,\n\t\teasing: cubicOut,\n\t\tcss: (t, u) => `transform: translate(${u * dx}px, ${u * dy}px) rotate(${t * 360}deg);`\n\t};\n}\n```\n\n### Tick-based Animations\n\nAlternatively, return a `tick` function called during animation with the same `t` and `u` arguments. Use this only when CSS animations aren't suitable:\n\n```js\ntick: (t, u) => Object.assign(node.style, { color: t > 0.5 ? 'Pink' : 'Blue' })\n```","## Animations in Keyed Each Blocks\n\nAnimations trigger when elements in a keyed each block are reordered (not on add/remove). Use the `animate:` directive on immediate children:\n\n```svelte\n{#each list as item, index (item)}\n\t\u003Cli animate:flip={{ delay: 500 }}>{item}\u003C/li>\n{/each}\n```\n\n### Custom Animation Functions\n\nReturn an object with `delay`, `duration`, `easing`, and either `css` or `tick`:\n\n```js\nfunction whizz(node, { from, to }, params) {\n\tconst dx = from.left - to.left;\n\tconst dy = from.top - to.top;\n\tconst d = Math.sqrt(dx * dx + dy * dy);\n\t\n\treturn {\n\t\tduration: Math.sqrt(d) * 120,\n\t\teasing: cubicOut,\n\t\tcss: (t, u) => `transform: translate(${u * dx}px, ${u * dy}px) rotate(${t * 360}deg);`\n\t};\n}\n```\n\nPrefer `css` over `tick` for better performance (runs off main thread).","Animations in keyed each blocks trigger on reordering; custom animation functions receive node and from/to DOMRect positions, returning css or tick-based animations."],"uses":{"params":["name","path"]}}]}
