{"type":"data","nodes":[{"type":"data","data":[null],"uses":{}},{"type":"data","data":[{"libraryName":1,"itemPath":2,"docItem":3},"sveltejs-sveltekit","advanced-techniques/errors",{"type":4,"path":5,"relevant":6,"token_counts":7,"usage":11,"markdown":15},"page","30-advanced/25-errors.md",true,{"fulltext":8,"digest":9,"short_digest":10},1497,543,268,{"input":12,"output":13,"details":14},2538,920,null,{"fulltext":16,"digest":17,"short_digest":18,"essence":19},"---\ntitle: Errors\n---\n\nErrors are an inevitable fact of software development. SvelteKit handles errors differently depending on where they occur, what kind of errors they are, and the nature of the incoming request.\n\n## Error objects\n\nSvelteKit distinguishes between expected and unexpected errors, both of which are represented as simple `{ message: string }` objects by default.\n\nYou can add additional properties, like a `code` or a tracking `id`, as shown in the examples below. (When using TypeScript this requires you to redefine the `Error` type as described in  [type safety](errors#Type-safety)).\n\n## Expected errors\n\nAn _expected_ error is one created with the [`error`](@sveltejs-kit#error) helper imported from `@sveltejs/kit`:\n\n```js\n/// file: src/routes/blog/[slug]/+page.server.js\n// @filename: ambient.d.ts\ndeclare module '$lib/server/database' {\n\texport function getPost(slug: string): Promise\u003C{ title: string, content: string } | undefined>\n}\n\n// @filename: index.js\n// ---cut---\nimport { error } from '@sveltejs/kit';\nimport * as db from '$lib/server/database';\n\n/** @type {import('./$types').PageServerLoad} */\nexport async function load({ params }) {\n\tconst post = await db.getPost(params.slug);\n\n\tif (!post) {\n\t\terror(404, {\n\t\t\tmessage: 'Not found'\n\t\t});\n\t}\n\n\treturn { post };\n}\n```\n\nThis throws an exception that SvelteKit catches, causing it to set the response status code to 404 and render an [`+error.svelte`](routing#error) component, where `page.error` is the object provided as the second argument to `error(...)`.\n\n```svelte\n\u003C!--- file: src/routes/+error.svelte --->\n\u003Cscript>\n\timport { page } from '$app/state';\n\u003C/script>\n\n\u003Ch1>{page.error.message}\u003C/h1>\n```\n\n> [!LEGACY]\n> `$app/state` was added in SvelteKit 2.12. If you're using an earlier version or are using Svelte 4, use `$app/stores` instead.\n\nYou can add extra properties to the error object if needed...\n\n```js\n// @filename: ambient.d.ts\ndeclare global {\n\tnamespace App {\n\t\tinterface Error {\n\t\t\tmessage: string;\n\t\t\tcode: string;\n\t\t}\n\t}\n}\nexport {}\n\n// @filename: index.js\nimport { error } from '@sveltejs/kit';\n// ---cut---\nerror(404, {\n\tmessage: 'Not found',\n\t+++code: 'NOT_FOUND'+++\n});\n```\n\n...otherwise, for convenience, you can pass a string as the second argument:\n\n```js\nimport { error } from '@sveltejs/kit';\n// ---cut---\n---error(404, { message: 'Not found' });---\n+++error(404, 'Not found');+++\n```\n\n> [!NOTE] [In SvelteKit 1.x](migrating-to-sveltekit-2#redirect-and-error-are-no-longer-thrown-by-you) you had to `throw` the `error` yourself\n\n## Unexpected errors\n\nAn _unexpected_ error is any other exception that occurs while handling a request. Since these can contain sensitive information, unexpected error messages and stack traces are not exposed to users.\n\nBy default, unexpected errors are printed to the console (or, in production, your server logs), while the error that is exposed to the user has a generic shape:\n\n```json\n{ \"message\": \"Internal Error\" }\n```\n\nUnexpected errors will go through the [`handleError`](hooks#Shared-hooks-handleError) hook, where you can add your own error handling â€” for example, sending errors to a reporting service, or returning a custom error object which becomes `$page.error`.\n\n## Responses\n\nIf an error occurs inside `handle` or inside a [`+server.js`](routing#server) request handler, SvelteKit will respond with either a fallback error page or a JSON representation of the error object, depending on the request's `Accept` headers.\n\nYou can customise the fallback error page by adding a `src/error.html` file:\n\n```html\n\u003C!DOCTYPE html>\n\u003Chtml lang=\"en\">\n\t\u003Chead>\n\t\t\u003Cmeta charset=\"utf-8\" />\n\t\t\u003Ctitle>%sveltekit.error.message%\u003C/title>\n\t\u003C/head>\n\t\u003Cbody>\n\t\t\u003Ch1>My custom error page\u003C/h1>\n\t\t\u003Cp>Status: %sveltekit.status%\u003C/p>\n\t\t\u003Cp>Message: %sveltekit.error.message%\u003C/p>\n\t\u003C/body>\n\u003C/html>\n```\n\nSvelteKit will replace `%sveltekit.status%` and `%sveltekit.error.message%` with their corresponding values.\n\nIf the error instead occurs inside a `load` function while rendering a page, SvelteKit will render the [`+error.svelte`](routing#error) component nearest to where the error occurred. If the error occurs inside a `load` function in `+layout(.server).js`, the closest error boundary in the tree is an `+error.svelte` file _above_ that layout (not next to it).\n\nThe exception is when the error occurs inside the root `+layout.js` or `+layout.server.js`, since the root layout would ordinarily _contain_ the `+error.svelte` component. In this case, SvelteKit uses the fallback error page.\n\n## Type safety\n\nIf you're using TypeScript and need to customize the shape of errors, you can do so by declaring an `App.Error` interface in your app (by convention, in `src/app.d.ts`, though it can live anywhere that TypeScript can 'see'):\n\n```ts\n/// file: src/app.d.ts\ndeclare global {\n\tnamespace App {\n\t\tinterface Error {\n+++\t\t\tcode: string;\n\t\t\tid: string;+++\n\t\t}\n\t}\n}\n\nexport {};\n```\n\nThis interface always includes a `message: string` property.\n\n## Further reading\n\n- [Tutorial: Errors and redirects](/tutorial/kit/error-basics)\n- [Tutorial: Hooks](/tutorial/kit/handle)\n","## Expected vs Unexpected Errors\n\nSvelteKit distinguishes between two error types:\n\n**Expected errors** are created with the `error()` helper from `@sveltejs/kit`. They throw an exception that SvelteKit catches, setting the response status code and rendering the nearest `+error.svelte` component with `page.error` containing the error object.\n\n```js\nimport { error } from '@sveltejs/kit';\n\nexport async function load({ params }) {\n\tconst post = await db.getPost(params.slug);\n\tif (!post) {\n\t\terror(404, 'Not found');\n\t}\n\treturn { post };\n}\n```\n\nYou can pass a string as the second argument or an object with custom properties:\n\n```js\nerror(404, { message: 'Not found', code: 'NOT_FOUND' });\n```\n\n**Unexpected errors** are any other exceptions. They're not exposed to users (to avoid leaking sensitive info) and instead show a generic `{ message: \"Internal Error\" }`. They pass through the `handleError` hook where you can add custom handling like error reporting.\n\n## Error Objects & Type Safety\n\nError objects are `{ message: string }` by default. Add custom properties by declaring an `App.Error` interface in `src/app.d.ts`:\n\n```ts\ndeclare global {\n\tnamespace App {\n\t\tinterface Error {\n\t\t\tcode: string;\n\t\t\tid: string;\n\t\t}\n\t}\n}\n```\n\n## Error Responses\n\nIf an error occurs in `handle` or `+server.js`, SvelteKit responds with either a fallback error page or JSON based on `Accept` headers.\n\nCustomize the fallback error page with `src/error.html`:\n\n```html\n\u003Chtml>\n\t\u003Ctitle>%sveltekit.error.message%\u003C/title>\n\t\u003Cbody>\n\t\t\u003Cp>Status: %sveltekit.status%\u003C/p>\n\t\t\u003Cp>Message: %sveltekit.error.message%\u003C/p>\n\t\u003C/body>\n\u003C/html>\n```\n\nFor errors in `load` functions during page rendering, SvelteKit renders the nearest `+error.svelte` component. Exception: errors in root `+layout.js/+layout.server.js` use the fallback error page since the root layout contains the error component.","## Expected vs Unexpected Errors\n\n**Expected errors** use the `error()` helper to throw exceptions that SvelteKit catches and renders with `+error.svelte`:\n\n```js\nimport { error } from '@sveltejs/kit';\nerror(404, 'Not found');\n// or with custom properties:\nerror(404, { message: 'Not found', code: 'NOT_FOUND' });\n```\n\n**Unexpected errors** are other exceptions. They show a generic message to users and pass through the `handleError` hook for custom handling.\n\n## Type Safety\n\nDeclare custom error properties in `src/app.d.ts`:\n\n```ts\ndeclare global {\n\tnamespace App {\n\t\tinterface Error {\n\t\t\tcode: string;\n\t\t\tid: string;\n\t\t}\n\t}\n}\n```\n\n## Error Responses\n\nCustomize the fallback error page with `src/error.html` using `%sveltekit.status%` and `%sveltekit.error.message%` placeholders. Errors in `load` functions render the nearest `+error.svelte`, except in root layouts which use the fallback page.","How to handle expected and unexpected errors in SvelteKit, customize error objects, and control error page rendering."],"uses":{"params":["name","path"]}}]}
