{"type":"data","nodes":[{"type":"data","data":[null],"uses":{}},{"type":"data","data":[{"libraryName":1,"itemPath":2,"docItem":3},"sveltejs-svelte","Miscellaneous & Advanced Topics",{"type":4,"path":5,"relevant":6,"token_counts":-1,"usage":7,"markdown":11},"directory","07-misc",true,{"input":8,"output":9,"details":10},2806,1520,null,{"digest":12,"short_digest":13,"essence":14},"## Testing\n\n**Unit/Integration Testing**: Use Vitest with `vite.config.js` configured for browser entry points. Wrap effect tests in `$effect.root()` and use `flushSync()` for synchronous execution.\n\n```js\ntest('Multiplier', () => {\n\tlet double = multiplier(0, 2);\n\texpect(double.value).toEqual(0);\n});\n```\n\n**Component Testing**: Use `mount()` API or `@testing-library/svelte`:\n\n```js\nconst component = mount(Component, { target: document.body, props: { initial: 0 } });\n```\n\n**E2E Testing**: Use Playwright with `playwright.config.js` webServer settings:\n\n```js\ntest('home page has expected h1', async ({ page }) => {\n\tawait page.goto('/');\n\tawait expect(page.locator('h1')).toBeVisible();\n});\n```\n\n## TypeScript\n\nAdd `lang=\"ts\"` to script tags. Configure `vitePreprocess` in `svelte.config.js` and set `tsconfig.json` with `target: ES2015`, `verbatimModuleSyntax: true`, `isolatedModules: true`.\n\n```svelte\n\u003Cscript lang=\"ts\" generics=\"Item extends { text: string }\">\n\tinterface Props {\n\t\titems: Item[];\n\t\tselect(item: Item): void;\n\t}\n\tlet { items, select }: Props = $props();\n\tlet count: number = $state(0);\n\u003C/script>\n```\n\nUse `Component\u003CProps>` and `ComponentProps\u003CTComponent>` for type constraints. Extend custom elements via `.d.ts`:\n\n```ts\ndeclare namespace svelteHTML {\n\tinterface IntrinsicElements {\n\t\t'my-custom-element': { someattribute: string };\n\t}\n}\n```\n\n## Custom Elements\n\nCompile to web components with `customElement: true` and `\u003Csvelte:options customElement=\"tag-name\" />`. Props exposed as DOM properties and attributes.\n\n```svelte\n\u003Csvelte:options customElement={{ tag: 'my-element', props: { name: { reflect: true } } }} />\n```\n\nConfigure via `tag`, `shadow: \"none\"`, `props` (with `attribute`, `reflect`, `type`), and `extend` function. Limitations: styles encapsulated, not SSR-friendly, slotted content eager, context doesn't cross boundaries, avoid property names starting with `on`.\n\n## Svelte 4 Migration\n\n**Minimum versions**: Node 16+, TypeScript 5+, SvelteKit 1.20.4+, webpack 5+. Bundlers must specify `browser` condition. No CommonJS output. Stricter types for `createEventDispatcher`, `Action`, `ActionReturn`, `onMount`. `tag` option → `customElement`, `SvelteComponentTyped` → `SvelteComponent`. Transitions local by default (use `|global` modifier). Slot bindings no longer exposed to named slots. Preprocessors execute in order, each must have a name. Switch ESLint from `eslint-plugin-svelte3` to `eslint-plugin-svelte`. `svelte.JSX` → `svelteHTML`.\n\n## Svelte 5 Migration\n\n**Reactivity**: `let` → `$state`, `$:` → `$derived`/`$effect`, `export let` → `$props()`\n\n**Events**: `on:click` → `onclick`, `createEventDispatcher` → callback props\n\n**Slots**: `\u003Cslot />` → `children` prop with `{@render}`, named slots → props, `let:` → snippets\n\n**Components**: Classes → functions, use `mount(App, {target})` instead of `new App({target})`\n\n**Other**: Bindable props need `$bindable()`, stricter HTML, modern browsers only, `null`/`undefined` render empty, form resets trigger bindings\n\nRun `npx sv migrate svelte-5` for automatic migration.\n\n## FAQs\n\n**Support**: Reference docs, Stack Overflow (tag: svelte), Discord, Reddit\n\n**Tooling**: Official VS Code extension, prettier-plugin-svelte\n\n**Testing**: Vitest (unit), Playwright/Cypress (E2E)\n\n**Routing**: SvelteKit (official) or page.js, navaid, svelte-spa-router, Routify\n\n**Mobile**: SvelteKit SPA → Tauri/Capacitor; Svelte Native for Svelte 4 only\n\n**Styling**: Svelte removes unused styles; use `:global(...)` for global styles","## Testing\n- **Vitest**: Unit/integration tests with `$effect.root()` and `flushSync()`\n- **Component Testing**: `mount()` API or `@testing-library/svelte`\n- **Playwright**: E2E tests with webServer config\n\n## TypeScript\n- `lang=\"ts\"` on script tags, configure `vitePreprocess` in `svelte.config.js`\n- Type props/state with `$props()` and `$state(type)`, use generics\n- Extend custom elements via `svelteHTML` namespace\n\n## Custom Elements\n- `\u003Csvelte:options customElement={{ tag, props, shadow, extend }} />`\n- Styles encapsulated, slotted content eager, context boundary\n\n## Svelte 4 → 5 Migration\n- **Reactivity**: `let` → `$state`, `$:` → `$derived`/`$effect`, `export let` → `$props()`\n- **Events**: `on:click` → `onclick`, remove `createEventDispatcher`\n- **Slots**: `\u003Cslot />` → `children` prop with `{@render}`\n- **Components**: Classes → functions, use `mount()`\n- Run `npx sv migrate svelte-5` for automatic migration","Testing strategies, TypeScript setup, custom elements compilation, and migration guides for Svelte 4→5."],"uses":{"params":["name","path"]}}]}
