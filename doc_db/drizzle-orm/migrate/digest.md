## Purpose
`drizzle-kit migrate` applies SQL migrations generated by `drizzle-kit generate`. It implements the code-first approach to managing migrations.

## How it works
1. Reads all `.sql` migration files from the migrations folder
2. Connects to database and fetches entries from the drizzle migrations log table (`__drizzle_migrations`)
3. Determines which migrations haven't been applied yet
4. Runs new SQL migrations and logs them to the migrations table

## Configuration
Requires `dialect` and database connection credentials via `drizzle.config.ts` or CLI options:

```ts
// drizzle.config.ts
import { defineConfig } from "drizzle-kit";

export default defineConfig({
  dialect: "postgresql",
  schema: "./src/schema.ts",
  dbCredentials: {
    url: "postgresql://user:password@host:port/dbname"
  },
  migrations: {
    table: '__drizzle_migrations', // customizable
    schema: 'drizzle', // PostgreSQL only
  },
});
```

```shell
npx drizzle-kit migrate
# or with CLI options
npx drizzle-kit migrate --dialect=postgresql --url=postgresql://user:password@host:port/dbname
```

## Multiple configurations
Support multiple config files for different database stages:
```shell
npx drizzle-kit migrate --config=drizzle-dev.config.ts
npx drizzle-kit migrate --config=drizzle-prod.config.ts
```

## Example workflow
1. Define schema in `src/schema.ts`:
```ts
import * as p from "drizzle-orm/pg-core";
export const users = p.pgTable("users", {
  id: p.serial().primaryKey(),
  name: p.text(),
})
```

2. Generate migration: `npx drizzle-kit generate --name=init` creates `0000_init.sql`
3. Apply migration: `npx drizzle-kit migrate` runs the SQL and logs it to database