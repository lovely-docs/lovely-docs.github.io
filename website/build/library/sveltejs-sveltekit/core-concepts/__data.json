{"type":"data","nodes":[{"type":"data","data":[null],"uses":{}},{"type":"data","data":[{"libraryName":1,"itemPath":2,"docItem":3},"sveltejs-sveltekit","core-concepts",{"type":4,"path":5,"relevant":6,"token_counts":7,"usage":11,"markdown":15},"directory","20-core-concepts",true,{"fulltext":8,"digest":9,"short_digest":10},1691,700,288,{"input":12,"output":13,"details":14},2817,1111,null,{"fulltext":16,"digest":17,"short_digest":18,"essence":19},"\n\n## Pages\n\n### routing\nFilesystem-based routing with special `+` prefixed files for pages, layouts, API endpoints, and error handling.\n\nRoutes defined by `src/routes` directory structure with `+` prefixed files. `+page.svelte` for pages, `+page.js`/`+page.server.js` for load functions, `+layout.svelte` for shared markup, `+server.js` for API endpoints, `+error.svelte` for error pages. Load functions run on server/client or server-only. `+server.js` exports HTTP handlers. Use `$types` for type safety.\n\n### loading-data\nDefine load functions in route files to fetch and return data to components, with separate universal and server-only variants offering different capabilities and execution contexts.\n\n## Load Functions\n\nDefine in `+page.js`/`+page.server.js` or `+layout.js`/`+layout.server.js`:\n\n```js\n// Universal (server + browser)\nexport function load({ params }) {\n\treturn { data: 'value' };\n}\n\n// Server-only\nexport async function load({ params }) {\n\treturn { data: await db.query() };\n}\n```\n\n## Universal vs Server\n\n- **Universal**: Run on server (SSR) then browser. Can return non-serializable data.\n- **Server**: Run only on server. Must return serializable data. Use for DB/secrets.\n\n## Key Features\n\n- **Layout data**: Available to child layouts and pages\n- **URL data**: Access `url`, `route`, `params`\n- **Fetch**: Use provided `fetch()` (inherits cookies, allows relative URLs)\n- **Cookies**: Server load can access/set via `cookies.get/set()`\n- **Headers**: Set response headers with `setHeaders()`\n- **Parent data**: Access parent load data with `await parent()`\n- **Errors/Redirects**: Use `error()` and `redirect()` helpers\n- **Streaming**: Return unresolved promises from server load\n- **Rerun**: Triggered by param/url changes or `invalidate()`\n- **Auth**: Use `getRequestEvent()` in shared auth functions\n\n### form-actions\nServer-side form actions in +page.server.js handle POST requests with progressive enhancement support via use:enhance.\n\n## Form Actions Basics\n\nExport `actions` from `+page.server.js` to handle POST requests:\n\n```js\nexport const actions = {\n\tdefault: async (event) => {},\n\tlogin: async (event) => {},\n\tregister: async (event) => {}\n};\n```\n\nInvoke with `\u003Cform method=\"POST\" action=\"?/login\">` or `\u003Cbutton formaction=\"?/register\">`.\n\n## Handling Data & Errors\n\nRead form data and return results:\n\n```js\nexport const actions = {\n\tlogin: async ({ request }) => {\n\t\tconst data = await request.formData();\n\t\tif (!data.get('email')) {\n\t\t\treturn fail(400, { missing: true });\n\t\t}\n\t\treturn { success: true };\n\t}\n};\n```\n\nAccess in component via `form` prop. Use `redirect()` for redirects.\n\n## Progressive Enhancement\n\nAdd `use:enhance` for client-side form handling without full-page reloads:\n\n```svelte\n\u003Cscript>\n\timport { enhance, applyAction } from '$app/forms';\n\u003C/script>\n\n\u003Cform method=\"POST\" use:enhance={({ formData }) => {\n\treturn async ({ result }) => {\n\t\tawait applyAction(result);\n\t};\n}>\n```\n\nUse `deserialize` when implementing custom fetch-based handlers.\n\n### page-options\nExport page options from layout and page files to control server rendering, prerendering, client rendering, trailing slashes, and adapter-specific configuration.\n\n## prerender\n`export const prerender = true/false/'auto'` generates static HTML at build time. Specify dynamic routes via `entries()` function. Pages must return identical content for all users.\n\n## ssr\n`export const ssr = false` skips server rendering, sends empty shell. Setting in root layout makes entire app client-only (SPA).\n\n## csr\n`export const csr = false` disables client-side rendering—no JavaScript shipped, HTML/CSS only, full-page navigation.\n\n## trailingSlash\n`export const trailingSlash = 'never' | 'always' | 'ignore'` controls URL trailing slash behavior.\n\n## config\n`export const config = { ... }` sets adapter-specific configuration, merged at top level only.\n\n### state-management\nGuidelines for managing state in server-rendered and client-side applications, covering shared state pitfalls, load function purity, context API usage, component lifecycle preservation, and state persistence strategies.\n\n**Avoid shared state on server** — don't store data in shared variables; use cookies and databases instead.\n\n**No side-effects in load** — return data instead of writing to stores:\n```js\nexport async function load({ fetch }) {\n\treturn { user: await fetch('/api/user').then(r => r.json()) };\n}\n```\n\n**Use context API for safe state sharing** — pass functions into context to maintain reactivity across SSR boundaries.\n\n**Component state is preserved** — make dependent values reactive with `$derived` when data changes.\n\n**URL search parameters** — store state that needs to survive reloads: `?sort=price&order=ascending`.\n\n**Snapshots** — preserve ephemeral UI state across navigation.\n\n### remote-functions\nType-safe client-server communication with query, form, command, and prerender functions that run on server and support validation, progressive enhancement, and single-flight mutations.\n\nRemote functions enable type-safe client-server communication, always running on server. Four types: `query` (read), `query.batch` (batch reads), `form` (write with progressive enhancement), `command` (write from anywhere), `prerender` (build-time static data).\n\n**query**:\n```js\nexport const getPost = query(v.string(), async (slug) => {\n  const [post] = await db.sql`SELECT * FROM post WHERE slug = ${slug}`;\n  return post;\n});\n```\nUse with `await getPost(slug)` or access `.loading`, `.error`, `.current`. Call `.refresh()` to re-fetch.\n\n**form**:\n```js\nexport const createPost = form(v.object({title: v.string(), content: v.string()}), async (data) => {\n  await db.insert(data);\n  redirect(303, '/blog');\n});\n```\nSpread onto `\u003Cform>`, access fields via `createPost.fields.title.as('text')`. Validate with `validate()`, get issues via `field.issues()`. Single-flight mutations: `submit().updates(query())`.\n\n**command**: Like form but callable from anywhere, no progressive enhancement. Update queries via `.updates(query())`.\n\n**prerender**: Build-time execution for static data. Specify `inputs: () => [...]`.\n\nEnable in config: `kit: { experimental: { remoteFunctions: true } }`\n\n### core-concepts\nIndex page for core SvelteKit concepts and foundational topics.\n\nOverview page introducing fundamental SvelteKit concepts and architectural patterns.\n\n","## Routing\nRoutes defined by `src/routes` directory structure with `+` prefixed files: `+page.svelte` for pages, `+page.js`/`+page.server.js` for load functions, `+layout.svelte` for shared markup, `+server.js` for API endpoints, `+error.svelte` for error pages.\n\n## Load Functions\nDefine in `+page.js`/`+page.server.js` or `+layout.js`/`+layout.server.js`. Universal load functions run on server and browser; server-only load functions run only on server and must return serializable data. Access `params`, `url`, `route`, `cookies`, set headers, access parent data, stream promises, and trigger reruns on param/url changes or `invalidate()`.\n\n```js\nexport async function load({ params, fetch, cookies }) {\n\tconst data = await fetch('/api/data');\n\tcookies.set('key', 'value');\n\treturn { data };\n}\n```\n\n## Form Actions\nExport `actions` from `+page.server.js` to handle POST requests. Read form data, return results or errors with `fail()`, redirect with `redirect()`. Add `use:enhance` directive for client-side handling without full-page reloads.\n\n```js\nexport const actions = {\n\tlogin: async ({ request }) => {\n\t\tconst data = await request.formData();\n\t\tif (!data.get('email')) return fail(400, { missing: true });\n\t\treturn { success: true };\n\t}\n};\n```\n\n## Page Options\nExport configuration from layout and page files:\n- `prerender = true/'auto'` — generates static HTML at build time\n- `ssr = false` — skips server rendering, sends empty shell\n- `csr = false` — disables client-side rendering, HTML/CSS only\n- `trailingSlash = 'never' | 'always' | 'ignore'` — controls URL trailing slash behavior\n- `config = {...}` — adapter-specific configuration\n\n## State Management\nAvoid shared state on server; use cookies and databases instead. Don't write to stores in load functions—return data instead. Use context API for safe state sharing. Store persistent state in URL search parameters. Preserve ephemeral UI state with snapshots.\n\n## Remote Functions\nType-safe client-server communication with `query` (read), `form` (write with progressive enhancement), `command` (write from anywhere), and `prerender` (build-time data).\n\n```js\nexport const getPost = query(v.string(), async (slug) => {\n\tconst [post] = await db.sql`SELECT * FROM post WHERE slug = ${slug}`;\n\treturn post;\n});\n\nexport const createPost = form(v.object({title: v.string()}), async (data) => {\n\tawait db.insert(data);\n\tredirect(303, '/blog');\n});\n```\n\nEnable with `kit: { experimental: { remoteFunctions: true } }`","## Routing\n`src/routes` directory with `+` prefixed files: `+page.svelte`, `+page.server.js`, `+layout.svelte`, `+server.js`, `+error.svelte`.\n\n## Load Functions\n```js\nexport async function load({ params, fetch, cookies }) {\n\treturn { data: await fetch('/api/data') };\n}\n```\nUniversal and server-only variants. Access params, url, cookies, set headers, stream promises.\n\n## Form Actions\n```js\nexport const actions = {\n\tlogin: async ({ request }) => {\n\t\tconst data = await request.formData();\n\t\treturn fail(400, { missing: true });\n\t}\n};\n```\nUse `use:enhance` for client-side handling.\n\n## Page Options\n`prerender`, `ssr`, `csr`, `trailingSlash`, `config` exports control rendering and behavior.\n\n## State Management\nAvoid shared server state. Return data from load functions. Use context API, URL parameters, and snapshots for state.\n\n## Remote Functions\nType-safe `query`, `form`, `command`, `prerender` functions. Enable with `kit: { experimental: { remoteFunctions: true } }`","Foundational patterns for routing, data loading, form handling, rendering configuration, state management, and type-safe client-server communication in SvelteKit applications."],"uses":{"params":["name","path"]}}]}
